- var cssCacheVersion = '20220206'
- var jsCacheVersion = '20220206'

block variables
    - var page_id = ''

doctype html
html(lang="en")
    head
        // =============== basic  ===============
        meta(charset='UTF-8')
        meta(http-equiv='x-ua-compatible' content='ie=edge')
        if title
            title=title + " â€” " + basetitle
        else
            title=basetitle
        meta(http-equiv='cache-control' content='no-cache')
        meta(http-equiv='expires' content='0') 
        meta(http-equiv='pragma' content='no-cache')
        meta(name='viewport' content='width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no')
        meta(name='robots' content='index, follow')
        meta(name='keywords' content=meta.keywords)
        meta(name='description' content=meta.description)
        meta(name='author' content=meta.author)
        
        // =============== css  ===============
        link(type='text/css' rel='stylesheet' href=static_folder_path + '/styles/reset.css?cache=' + cssCacheVersion)
        link(type='text/css' rel='stylesheet' href=static_folder_path + '/styles/plugins.css?cache=' + cssCacheVersion)
        link(type='text/css' rel='stylesheet' href=static_folder_path + '/styles/cookieconsent.css?cache=' + cssCacheVersion)
        link(type='text/css' rel='stylesheet' href=static_folder_path + '/styles/style.css?cache=' + cssCacheVersion)
        link(type='text/css' rel='stylesheet' href=static_folder_path + '/styles/color.css?cache=' + cssCacheVersion)
        
        // =============== favicons ===============
        link(rel='shortcut icon' href=static_folder_path + '/images/favicon.ico')
        
        // =============== Google Analytics  ===============
        script(type='text/javascript' async src='https://www.googletagmanager.com/gtag/js?id=G-MC0SQWB982')
        script(type='text/javascript').
            // Initialize the data layer
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            
            // Google Tag Manager
            (function(w, d, s, l, i) {
                w[l] = w[l] || [];
                w[l].push({
                    'gtm.start': new Date().getTime(),
                    event: 'gtm.js'
                });
                var f = d.getElementsByTagName(s)[0],
                    j = d.createElement(s),
                    dl = l != 'dataLayer' ? '&l=' + l : '';
                j.async = true;
                j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
                f.parentNode.insertBefore(j, f);
            })(window, document, 'script', 'dataLayer', 'GTM-KJ8DFHQ');

    body(id=page_id)
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KJ8DFHQ" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

        // loader
        .loader
            .tm-loader
                #circle
        
        block view

        // =============== scripts  ===============
        block scripts
            script(type='text/javascript' src=static_folder_path + '/scripts/jquery.min.js?cache=' + jsCacheVersion)
            script(type='text/javascript' src=static_folder_path + '/scripts/plugins.js?cache=' + jsCacheVersion)
            script(type='text/javascript' src=static_folder_path + '/scripts/cookieconsent.js?cache=' + jsCacheVersion)
            script(type='text/javascript' src=static_folder_path + '/scripts/main.js?cache=' + jsCacheVersion)
            script(type='text/javascript' src=static_folder_path + '/scripts/core.js?cache=' + jsCacheVersion)
            script(type='text/javascript' src=static_folder_path + '/scripts/scripts.js?cache=' + jsCacheVersion)
            script(type='text/javascript').
                window.shareplugin_share_on_prefix = '#{text.share_on_prefix}';
            script(type='text/javascript').
                let gallery = new Gallery();

                gallery.currentPageId = "#{page_id}";

                gallery.language = "#{language_code}";

                gallery.cookieConsentSettings = {
                    enabled: !{cookie_consent_enabled},
                    cookieName: "brunocostagallery.cookie_consent_status",
                    cookieExpiration: 182,
                    consentModalDescription: "!{cookie_policy.consent_modal.description}",
                    consentModalAcceptAll: "!{cookie_policy.consent_modal.accept_all}",
                    settingsModalTitle: "!{cookie_policy.settings_modal.title}",
                    settingsModalSubtitle: "!{cookie_policy.settings_modal.subtitle}",
                    settingsModalDescription: "!{cookie_policy.settings_modal.description}",
                    settingsModalMoreInformationTitle: "!{cookie_policy.settings_modal.more_information_title}",
                    settingsModalMoreInformationDescription: "!{cookie_policy.settings_modal.more_information_description}",
                    settingsModalClose: "!{cookie_policy.settings_modal.close}",
                    settingsModalSave: "!{cookie_policy.settings_modal.save}",
                    settingsModalAcceptAll: "!{cookie_policy.settings_modal.accept_all}",
                    settingsModalRejectAll: "!{cookie_policy.settings_modal.accept_necessary}",
                    settingsModalStrictlyNecessaryTitle: "!{cookie_policy.settings_modal.strictly_necessary_cookies_title}",
                    settingsModalStrictlyNecessaryDescription: "!{cookie_policy.settings_modal.strictly_necessary_cookies_description}",
                    settingsModalPerformanceAndAnalyticsTitle: "!{cookie_policy.settings_modal.performance_and_analytics_cookies_title}",
                    settingsModalPerformanceAndAnalyticsDescription: "!{cookie_policy.settings_modal.performance_and_analytics_cookies_description}"
                };

                gallery.onGoogleAnalyticsCanBeEnabled = function(shouldResetUserPrefs) {
                    if (shouldResetUserPrefs)
                        window["_gaUserPrefs"] = {};
                
                    gtag("js", new Date());
                    gtag("config", "G-MC0SQWB982");
                };
                gallery.onGoogleAnalyticsConsentGiven = function(allowed) {
                    if (allowed) {
                        gtag('consent', 'update', {
                            'ad_storage': 'allowed',
                            'analytics_storage': 'allowed'
                        });
                    } else {
                        gtag('consent', 'update', {
                            'ad_storage': 'denied',
                            'analytics_storage': 'denied'
                        });
                    }
                };
                
                window.addEventListener("load", () => { window.gallery = gallery; gallery.Start(); });
